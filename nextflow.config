
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
}

params {

    /* GRCh37 Reference Genome Files */
    REFERENCE_GENOME_FASTA = "Homo_sapiens.GRCh37.dna.primary_assembly.fa"
    REFERENCE_GENOME_DICT = "Homo_sapiens.GRCh37.dna.primary_assembly.dict"
    REFERENCE_GENOME_AMB = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.amb"
    REFERENCE_GENOME_ANN = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.ann"
    REFERENCE_GENOME_BWT = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.bwt"
    REFERENCE_GENOME_FAI = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.fai"
    REFERENCE_GENOME_PAC = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.pac"
    REFERENCE_GENOME_SA = "Homo_sapiens.GRCh37.dna.primary_assembly.fa.sa"

    /* Broad's b37 Resource Bundle Files */
    REFERENCE_GENOME_FASTA = "Homo_sapiens.GRCh37.dna.primary_assembly.fa"
    DBSNP_VCF = "dbsnp_138.b37.vcf"
    GOLD_STANDARD_INDELS_1000G_VCF = "Mills_and_1000G_gold_standard.indels.b37.vcf"
    OMNI25_1000G_VCF = "1000G_omni2.5.b37.vcf"
    PHASE1_INDELS_1000G_VCF = "1000G_phase1.indels.b37.vcf"

}

profiles {

    watson {

        process.maxForks = 1

        params {
            reference = "/home/watson/references/GRCh37/"
            resources = "/home/watson/references/b37-resource-bundle/"
            results = "/home/watson/wilder/pharmacogenetics-analyses/"
            intervals = "${projectDir}/intervals/stargazer-target-genes.sorted.list"
            intervalsJson = "${projectDir}/intervals/list.json"
            script = "${projectDir}/scripts/merge_stargazer_output_per_sample.py"
            snpsIndelsHapsBed = "${projectDir}/intervals/snps-and-indels-haps.bed"
        }

    }

    amazon {

        process {
            executor = "awsbatch"
            queue = "pharmacogenetics-analyses-queue"
            memory = { task.attempt > 1 ? 64.GB : 32.GB }
            cpus = { task.attempt > 1 ? 32 : 16 }
        }

        aws {
            region = "us-east-1"
            batch.cliPath = "/home/ec2-user/miniconda/bin/aws"
        }

        params {
            reference = "s3://genomika-reference-genomes/GRCh37/"
            resources = "s3://genomika-resource-bundles/b37-resource-bundle/"
            results = "s3://genomika-pharmacogenetics-analyses/"
            intervals = "s3://genomika-pharmacogenetics-pipeline/intervals/stargazer-target-genes.sorted.list"
            intervalsJson = "s3://genomika-pharmacogenetics-pipeline/intervals/list.json"
            script = "s3://genomika-pharmacogenetics-pipeline/scripts/merge_stargazer_output_per_sample.py"
            snpsIndelsHapsBed = "s3://genomika-pharmacogenetics-pipeline/intervals/snps-and-indels-haps.bed"
        }

    }

}

